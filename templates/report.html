<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ATTTC Report (Ladder and Roster)</title>
<link rel="stylesheet" type="text/css" href="view.css" media="all">
</head>
<body id="main_body" >
  <img id="top" src="top.png" alt="">
  <div id="form_container">
    <h1><a>Player Ladder</a></h1>
    <div class="form_description">
      <h2>Live ATTTC Ladder as of {{date_string}}</h2>
      <h2>Season: {{season_string}}</h2>
    </div>
    <form>
    <h2>A-Ladder</h2>
    <h3>Recent matches:</h3>
    {% for am in a_matches %}
      {% block am %}
        <p>
          {{str(am.get('date'))}}:
          {{str(am.get('winner_last_name'))}} <i>def.</i>
          {{str(am.get('loser_last_name'))}} : &nbsp;&nbsp;
          {{str(am.get('score'))}}
          {{str(am.get('notes'))}}
        </p>
      {% end %}
    {% end %}
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for a in a_ladder %}
        {% set i = i + 1 %}
        {% block a %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ str(a.get('id')) }}</td>
            <td>{{ str(a.get('first_name')) + " " + str(a.get('last_name')) }}</td>
            <td>{{ str(a.get('points')) }}</td>
            <td>{{ str(a.get('a_wins')) }}</td>
            <td>{{ str(a.get('a_losses')) }}</td>
            <td>{{ str(a.get('wins')) }}</td>
            <td>{{ str(a.get('losses')) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h2>B-Ladder</h2>
    <h3>Recent matches:</h3>
    {% for bm in b_matches %}
      {% block bm %}
        <p>
          {{str(bm.get('date'))}}:
          {{str(bm.get('winner_last_name'))}} <i>def.</i>
          {{str(bm.get('loser_last_name'))}} : &nbsp;&nbsp;
          {{str(bm.get('score'))}}
          {{str(bm.get('notes'))}}
        </p>
      {% end %}
    {% end %}
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for b in b_ladder %}
        {% set i = i + 1 %}
        {% block b %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ str(b.get('id')) }}</td>
            <td>{{ str(b.get('first_name')) + " " + str(b.get('last_name')) }}</td>
            <td>{{ str(b.get('points')) }}</td>
            <td>{{ str(b.get('b_wins')) }}</td>
            <td>{{ str(b.get('b_losses')) }}</td>
            <td>{{ str(b.get('wins')) }}</td>
            <td>{{ str(b.get('losses')) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h2>C-Ladder</h2>
    <h3>Recent matches:</h3>
    {% for cm in c_matches %}
      {% block cm %}
        <p>
          {{str(cm.get('date'))}}:
          {{str(cm.get('winner_last_name'))}} <i>def.</i>
          {{str(cm.get('loser_last_name'))}} : &nbsp;&nbsp;
          {{str(cm.get('score'))}}
          {{str(cm.get('notes'))}}
        </p>
      {% end %}
    {% end %}
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for c in c_ladder %}
        {% set i = i + 1 %}
        {% block c %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ str(c.get('id')) }}</td>
            <td>{{ str(c.get('first_name')) + " " + str(c.get('last_name')) }}</td>
            <td>{{ str(c.get('points')) }}</td>
            <td>{{ str(c.get('c_wins')) }}</td>
            <td>{{ str(c.get('c_losses')) }}</td>
            <td>{{ str(c.get('wins')) }}</td>
            <td>{{ str(c.get('losses')) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h2>Unranked</h2>
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for u in u_ladder %}
        {% set i = i + 1 %}
        {% block u %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ str(u.get('id')) }}</td>
            <td>{{ str(u.get('first_name')) + " " + str(u.get('last_name')) }}</td>
            <td>{{ str(u.get('points')) }}</td>
            <td>0</td>
            <td>0</td>
            <td>{{ str(u.get('wins')) }}</td>
            <td>{{ str(u.get('losses')) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h1><a>Player Roster</a></h1>
    <div class="form_description">
      <h2>ATTTC Roster as of {{date_string}}</h2>
    </div>
    <table border="1" style="width:100%">
      <tr>
        <th style="width:23%">Name</th>
        <th style="width:4%">ID</th>
        <th style="width:4%">Ldr.</th>
        <th style="width:10%">Home Loc.</th>
        <th style="width:10%">Work Loc.</th>
        <th style="width:9%">Home #</th>
        <th style="width:9%">Cell #</th>
        <th style="width:9%">Work #</th>
        <th style="width:22%">E-mail</th>
      </tr>
      {% for p in roster %}
        {% block p %}
          <tr>
            <td>{{ str(p.get('first_name')) + " " + str(p.get('last_name')) }}</td>
            <td>{{ str(p.get('id')) }}</td>
            <td>{{ str(p.get('ladder'))[0:3].capitalize() }}</td>
            <td>{{ str(p.get('location')) if p.get('location') else "" }}</td>
            <td>{{ str(p.get('wlocation')) if p.get('wlocation') else "" }}</td>
            <td>{{ str(p.get('home_phone')) if p.get('home_phone') else ""}}</td>
            <td>{{ str(p.get('cell_phone')) if p.get('cell_phone') else ""}}</td>
            <td>{{ str(p.get('work_phone')) if p.get('work_phone') else ""}}</td>
            <td>{{ str(p.get('email')) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <div id="footer">
      Generated by <a href="http://www.phpform.org">pForm</a>
    </div>
  </div>
  <img id="bottom" src="bottom.png" alt="">
</body>
</html>
