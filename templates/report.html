<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ATTTC Report (Ladder and Roster)</title>
<link rel="stylesheet" type="text/css" href="view.css" media="all">
<script type="text/javascript" src="form_handler.js"></script>
</head>
<body id="main_body" >
  <img id="top" src="top.png" alt="">
  <div id="form_container">
    <h1><a>Player Ladder</a></h1>
    <div class="form_description">
      <h2>Live ATTTC Ladder as of {{date_string}}</h2>
      <h2>Season: {{season_string}}</h2>
    </div>
    <form>
    <h2>A-Ladder</h2>
    <h3>Recent matches:</h3>
    {% for am in a_matches %}
      {% block am %}
        <p>
          {{escape(str(am.get('date')))}}:
          {{escape(str(am.get('winner_last_name')))}} <i>def.</i>
          {{escape(str(am.get('loser_last_name')))}}
          {{escape(str(am.get('score')))}}
          {{escape(str(am.get('notes')))}}
        </p>
      {% end %}
    {% end %}
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for a in a_ladder %}
        {% set i = i + 1 %}
        {% block a %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ escape(str(a.get('id'))) }}</td>
            <td>{{ escape(str(a.get('first_name')) + " " + str(a.get('last_name'))) }}</td>
            <td>{{ escape(str(a.get('points'))) }}</td>
            <td>{{ escape(str(a.get('a_wins'))) }}</td>
            <td>{{ escape(str(a.get('a_losses'))) }}</td>
            <td>{{ escape(str(a.get('wins'))) }}</td>
            <td>{{ escape(str(a.get('losses'))) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h2>B-Ladder</h2>
    <h3>Recent matches:</h3>
    {% for bm in b_matches %}
      {% block bm %}
        <p>
          {{escape(str(bm.get('date')))}}:
          {{escape(str(bm.get('winner_last_name')))}} <i>def.</i>
          {{escape(str(bm.get('loser_last_name')))}}
          {{escape(str(bm.get('score')))}}
          {{escape(str(bm.get('notes')))}}
        </p>
      {% end %}
    {% end %}
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for b in b_ladder %}
        {% set i = i + 1 %}
        {% block b %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ escape(str(b.get('id'))) }}</td>
            <td>{{ escape(str(b.get('first_name')) + " " + str(b.get('last_name'))) }}</td>
            <td>{{ escape(str(b.get('points'))) }}</td>
            <td>{{ escape(str(b.get('b_wins'))) }}</td>
            <td>{{ escape(str(b.get('b_losses'))) }}</td>
            <td>{{ escape(str(b.get('wins'))) }}</td>
            <td>{{ escape(str(b.get('losses'))) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h2>C-Ladder</h2>
    <h3>Recent matches:</h3>
    {% for cm in c_matches %}
      {% block cm %}
        <p>
          {{escape(str(cm.get('date')))}}:
          {{escape(str(cm.get('winner_last_name')))}} <i>def.</i>
          {{escape(str(cm.get('loser_last_name')))}}
          {{escape(str(cm.get('score')))}}
          {{escape(str(cm.get('notes')))}}
        </p>
      {% end %}
    {% end %}
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for c in c_ladder %}
        {% set i = i + 1 %}
        {% block c %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ escape(str(c.get('id'))) }}</td>
            <td>{{ escape(str(c.get('first_name')) + " " + str(c.get('last_name'))) }}</td>
            <td>{{ escape(str(c.get('points'))) }}</td>
            <td>{{ escape(str(c.get('c_wins'))) }}</td>
            <td>{{ escape(str(c.get('c_losses'))) }}</td>
            <td>{{ escape(str(c.get('wins'))) }}</td>
            <td>{{ escape(str(c.get('losses'))) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h2>Unranked</h2>
    <table border="1" style="width:100%">
      <tr>
        <th style="width:7%">Rank</th>
        <th style="width:7%">ID</th>
        <th style="width:51%">Name</th>
        <th style="width:7%">Pts</th>
        <th style="width:7%">LW</th>
        <th style="width:7%">LL</th>
        <th style="width:7%">W</th>
        <th style="width:7%">L</th>
      </tr>
      {% set i = 0 %}
      {% for u in u_ladder %}
        {% set i = i + 1 %}
        {% block u %}
          <tr>
            <td>{{ str(i) }}</td>
            <td>{{ escape(str(u.get('id'))) }}</td>
            <td>{{ escape(str(u.get('first_name')) + " " + str(u.get('last_name'))) }}</td>
            <td>{{ escape(str(u.get('points'))) }}</td>
            <td>0</td>
            <td>0</td>
            <td>{{ escape(str(u.get('wins'))) }}</td>
            <td>{{ escape(str(u.get('losses'))) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <h1><a>Player Roster</a></h1>
    <div class="form_description">
      <h2>ATTTC Roster as of {{date_string}}</h2>
    </div>
    <table border="1" style="width:100%">
      <tr>
        <th style="width:31%">Name</th>
        <th style="width:5%">ID</th>
        <th style="width:5%">Ldr.</th>
        <th style="width:12%">Home #</th>
        <th style="width:12%">Cell #</th>
        <th style="width:12%">Work #</th>
        <th style="width:23%">E-mail</th>
      </tr>
      {% for p in roster %}
        {% block p %}
          <tr>
            <td>{{ escape(str(p.get('first_name')) + " " + str(p.get('last_name'))) }}</td>
            <td>{{ escape(str(p.get('id'))) }}</td>
            <td>{{ escape(str(p.get('ladder'))[0:3].capitalize()) }}</td>
            <td>{{ escape(str(p.get('home_phone'))) }}</td>
            <td>{{ escape(str(p.get('cell_phone'))) }}</td>
            <td>{{ escape(str(p.get('work_phone'))) }}</td>
            <td>{{ escape(str(p.get('email'))) }}</td>
          </tr>
        {% end %}
      {% end %}
    </table>
    <div id="footer">
      Generated by <a href="http://www.phpform.org">pForm</a>
    </div>
  </div>
  <img id="bottom" src="bottom.png" alt="">
</body>
</html>
